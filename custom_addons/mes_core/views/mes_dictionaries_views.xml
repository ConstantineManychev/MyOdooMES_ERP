<odoo>
    <record id="view_mes_shift_tree" model="ir.ui.view">
        <field name="name">mes.shift.tree</field>
        <field name="model">mes.shift</field>
        <field name="arch" type="xml">
            <tree editable="bottom">
                <field name="name"/>
                <field name="code"/>
                <field name="start_hour" widget="float_time"/>
                <field name="end_hour" widget="float_time"/>
                <field name="duration" widget="float_time"/>
            </tree>
        </field>
    </record>

    <record id="action_mes_shift" model="ir.actions.act_window">
        <field name="name">Work Shifts</field>
        <field name="res_model">mes.shift</field>
        <field name="view_mode">tree</field>
    </record>

    <record id="view_mes_defect_tree" model="ir.ui.view">
        <field name="name">mes.defect.tree</field>
        <field name="model">mes.defect</field>
        <field name="arch" type="xml">
            <tree editable="bottom">
                <field name="name"/>
                <field name="code"/>
                <field name="description"/>
            </tree>
        </field>
    </record>

    <record id="action_mes_defect" model="ir.actions.act_window">
        <field name="name">Defect Types</field>
        <field name="res_model">mes.defect</field>
        <field name="view_mode">tree</field>
    </record>

    <record id="view_mes_counts_search" model="ir.ui.view">
        <field name="name">mes.counts.search</field>
        <field name="model">mes.counts</field>
        <field name="arch" type="xml">
            <search>
                <field name="name"/>
                <field name="code"/>
                <searchpanel>
                    <field name="parent_id" icon="fa-folder" enable_counters="1"/>
                </searchpanel>
            </search>
        </field>
    </record>

    <record id="view_mes_counts_form" model="ir.ui.view">
        <field name="name">mes.counts.form</field>
        <field name="model">mes.counts</field>
        <field name="arch" type="xml">
            <form>
                <sheet>
                    <group>
                        <group>
                            <field name="name"/>
                            <field name="parent_id" placeholder="Select Parent Group..."/>
                            <field name="code"/>
                        </group>
                        <group>
                            <field name="default_OPCTag"/>
                            <field name="is_module_count"/>
                            <field name="wheel" invisible="not is_module_count"/>
                            <field name="module" invisible="not is_module_count"/>
                        </group>
                    </group>
                    <notebook>
                        <page string="Child Items">
                            <field name="child_ids">
                                <tree readonly="1">
                                    <field name="name"/>
                                    <field name="code"/>
                                </tree>
                            </field>
                        </page>
                    </notebook>
                </sheet>
            </form>
        </field>
    </record>

    <record id="view_mes_counts_tree" model="ir.ui.view">
        <field name="name">mes.counts.tree</field>
        <field name="model">mes.counts</field>
        <field name="arch" type="xml">
            <tree>
                <field name="complete_name" string="Hierarchy"/>
                <field name="code"/>
                <field name="default_OPCTag"/>
                <field name="is_cumulative"/>
                <field name="is_module_count"/>
                <field name="wheel" optional="hide"/>
                <field name="module" optional="hide"/>
            </tree>
        </field>
    </record>

    <record id="action_mes_counts" model="ir.actions.act_window">
        <field name="name">Counts</field>
        <field name="res_model">mes.counts</field>
        <field name="view_mode">tree,form</field>
        <field name="search_view_id" ref="view_mes_counts_search"/>
    </record>

    <record id="view_mes_event_search" model="ir.ui.view">
        <field name="name">mes.event.search</field>
        <field name="model">mes.event</field>
        <field name="arch" type="xml">
            <search>
                <field name="name"/>
                <field name="code"/>
                <searchpanel>
                    <field name="parent_id" icon="fa-folder" enable_counters="1"/>
                </searchpanel>
            </search>
        </field>
    </record>

    <record id="view_mes_event_form" model="ir.ui.view">
        <field name="name">mes.event.form</field>
        <field name="model">mes.event</field>
        <field name="arch" type="xml">
            <form>
                <sheet>
                    <group>
                        <group>
                            <field name="name"/>
                            <field name="parent_id" placeholder="Select Parent Group..."/>
                            <field name="code"/>
                        </group>
                        <group>
                            <field name="default_event_tag_type"/>
                            <field name="default_plc_value"/>
                        </group>
                    </group>
                    <notebook>
                        <page string="Child Items">
                            <field name="child_ids">
                                <tree readonly="1">
                                    <field name="name"/>
                                    <field name="code"/>
                                </tree>
                            </field>
                        </page>
                    </notebook>
                </sheet>
            </form>
        </field>
    </record>

    <record id="view_mes_event_tree" model="ir.ui.view">
        <field name="name">mes.event.tree</field>
        <field name="model">mes.event</field>
        <field name="arch" type="xml">
            <tree>
                <field name="complete_name" string="Hierarchy"/>
                <field name="code"/>
                <field name="default_event_tag_type"/>
                <field name="default_plc_value"/>
            </tree>
        </field>
    </record>

    <record id="action_mes_event" model="ir.actions.act_window">
        <field name="name">Events</field>
        <field name="res_model">mes.event</field>
        <field name="view_mode">tree,form</field>
        <field name="search_view_id" ref="view_mes_event_search"/>
    </record>

    <record id="view_mes_process_tree" model="ir.ui.view">
        <field name="name">mes.process.tree</field>
        <field name="model">mes.process</field>
        <field name="arch" type="xml">
            <tree>
                <field name="complete_name"/>
                <field name="code"/>
                <field name="default_OPCTag"/>
            </tree>
        </field>
    </record>

    <record id="view_mes_process_form" model="ir.ui.view">
        <field name="name">mes.process.form</field>
        <field name="model">mes.process</field>
        <field name="arch" type="xml">
            <form>
                <sheet>
                    <div class="oe_title">
                        <h1><field name="name" placeholder="Process Name"/></h1>
                    </div>
                    <group>
                        <group>
                            <field name="parent_id"/>
                            <field name="code"/>
                        </group>
                        <group>
                            <field name="default_OPCTag"/>
                        </group>
                    </group>
                </sheet>
            </form>
        </field>
    </record>

    <record id="action_mes_process" model="ir.actions.act_window">
        <field name="name">Processes Dictionary</field>
        <field name="res_model">mes.process</field>
        <field name="view_mode">tree,form</field>
    </record>

    <record id="view_mes_stream_tree" model="ir.ui.view">
        <field name="name">mes.stream.tree</field>
        <field name="model">mes.stream</field>
        <field name="arch" type="xml">
            <tree editable="bottom">
                <field name="stream_number"/>
                <field name="machine_id"/>
            </tree>
        </field>
    </record>

    <record id="action_mes_stream" model="ir.actions.act_window">
        <field name="name">Streams</field>
        <field name="res_model">mes.stream</field>
        <field name="view_mode">tree</field>
    </record>

    <record id="view_mes_wheel_tree" model="ir.ui.view">
        <field name="name">mes.wheel.tree</field>
        <field name="model">mes.wheel</field>
        <field name="arch" type="xml">
            <tree editable="bottom">
                <field name="wheel_number"/>
                <field name="stream_id"/>
                <field name="modules_amount"/>
                <field name="maintainx_id"/>
            </tree>
        </field>
    </record>

    <record id="action_mes_wheel" model="ir.actions.act_window">
        <field name="name">Wheels</field>
        <field name="res_model">mes.wheel</field>
        <field name="view_mode">tree</field>
    </record>

    <record id="view_mrp_workcenter_form_inherit_mes" model="ir.ui.view">
        <field name="name">mrp.workcenter.form.inherit.mes</field>
        <field name="model">mrp.workcenter</field>
        <field name="inherit_id" ref="mrp.mrp_workcenter_view"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='code']" position="after">
                <field name="machine_number"/>
                <field name="code_imatec"/>
                <field name="maintainx_id"/>
            </xpath>
        </field>
    </record>

    <record id="mes_workcenter_oee_form" model="ir.ui.view">
        <field name="name">mes.workcenter.oee.form</field>
        <field name="model">mrp.workcenter</field>
        <field name="inherit_id" ref="mrp.mrp_workcenter_view"/>
        <field name="arch" type="xml">
            
            <xpath expr="//button[@name='%(mrp.mrp_workcenter_productivity_report_oee)d']" position="attributes">
                <attribute name="invisible">True</attribute>
            </xpath>
            <xpath expr="//button[@name='%(mrp.mrp_workcenter_productivity_report_blocked)d']" position="attributes">
                <attribute name="invisible">True</attribute>
            </xpath>
            <xpath expr="//button[@name='%(mrp.action_mrp_workcenter_load_report_graph)d']" position="attributes">
                <attribute name="invisible">True</attribute>
            </xpath>
            
            <xpath expr="//button[.//field[@name='performance']]" position="attributes">
                <attribute name="invisible">True</attribute>
            </xpath>

            <xpath expr="//div[@name='button_box']" position="inside">
                <button class="oe_stat_button" icon="fa-pie-chart" style="pointer-events: none;">
                    <div class="o_stat_info">
                        <span class="o_stat_value"><field name="current_oee" nolabel="1"/> %</span>
                        <span class="o_stat_text">MES OEE</span>
                    </div>
                </button>
                <button class="oe_stat_button" icon="fa-arrow-down" style="pointer-events: none;">
                    <div class="o_stat_info text-danger">
                        <span class="o_stat_value"><field name="current_downtime_losses" nolabel="1"/> %</span>
                        <span class="o_stat_text">Downtime Loss</span>
                    </div>
                </button>
                <button class="oe_stat_button" icon="fa-trash" style="pointer-events: none;">
                    <div class="o_stat_info text-danger">
                        <span class="o_stat_value"><field name="current_waste_losses" nolabel="1"/> %</span>
                        <span class="o_stat_text">Waste Loss</span>
                    </div>
                </button>
                <button class="oe_stat_button" icon="fa-cubes" style="pointer-events: none;">
                    <div class="o_stat_info">
                        <span class="o_stat_value"><field name="current_produced" nolabel="1"/></span>
                        <span class="o_stat_text">Produced</span>
                    </div>
                </button>
            </xpath>
            
            <xpath expr="//notebook" position="before">
                <group string="MES Telemetry Settings" name="mes_telemetry_settings">
                    <group>
                        <field name="machine_settings_id"/>
                        <field name="refresh_frequency" widget="auto_refresh"/>
                        <field name="ideal_capacity_per_min"/>
                    </group>
                    <group>
                        <field name="runtime_event_id" options="{'no_create': True}"/>
                        <field name="production_count_id" options="{'no_create': True}"/>
                        <field name="allowed_pc_ips" placeholder="192.168.0.1"/>
                    </group>
                </group>
            </xpath>
            
            <xpath expr="//notebook" position="inside">
                <page string="Real-Time OEE" name="realtime_oee_page">
                    <group col="4">
                        <field name="current_oee" widget="progressbar" string="Overall OEE"/>
                        <field name="current_availability" widget="progressbar" string="Availability"/>
                        <field name="current_performance" widget="progressbar" string="Performance"/>
                        <field name="current_quality" widget="progressbar" string="Quality"/>
                    </group>
                </page>
            </xpath>
            
        </field>
    </record>

    <record id="mrp_workcenter_tree_view_mes_override" model="ir.ui.view">
        <field name="name">mrp.workcenter.tree.mes.override</field>
        <field name="model">mrp.workcenter</field>
        <field name="inherit_id" ref="mrp.mrp_workcenter_tree_view"/>
        <field name="arch" type="xml">
            <xpath expr="//tree" position="replace">
                <tree string="Work Centers Live" 
                      decoration-success="current_oee &gt;= 85" 
                      decoration-warning="current_oee &gt;= 67 and current_oee &lt; 85" 
                      decoration-danger="current_oee &lt; 67">
                    
                    <field name="name" string="Machine name" class="text-center"/>
                    <field name="current_first_running_time" string="Start Time" widget="datetime" class="text-center"/>
                    
                    <field name="current_produced" string="Produced" sum="Total Produced" class="text-center"/>
                    
                    <field name="current_runtime_formatted" string="Runtime" class="text-center"/>
                    
                    <field name="current_waste_losses" string="Waste Loss (%)" avg="Avg. Waste" class="text-center"/>
                    <field name="current_downtime_losses" string="DT Loss (%)" avg="Avg. DT" class="text-center"/>
                    <field name="current_oee" string="OEE (%)" avg="Avg. OEE" class="text-center"/>
                    
                    <field name="current_top_rejection" string="Top Rejection" class="text-center"/>
                    <field name="current_top_alarm" string="Top Alarm" class="text-center"/>
                </tree>
            </xpath>
        </field>
    </record>

    <record id="view_mrp_workcenter_search_mes" model="ir.ui.view">
        <field name="name">mrp.workcenter.search.mes</field>
        <field name="model">mrp.workcenter</field>
        <field name="inherit_id" ref="mrp.view_mrp_workcenter_search"/>
        <field name="arch" type="xml">
            <xpath expr="//search" position="inside">
                <separator/>
                <filter string="Critical OEE (&lt; 67%)" name="bad_oee" domain="[('current_oee', '&lt;', 67)]"/>
                <filter string="Excellent OEE (&gt;= 85%)" name="good_oee" domain="[('current_oee', '&gt;=', 85)]"/>
                <separator/>
                <filter string="Waste losses" name="has_waste" domain="[('current_waste_losses', '&gt;', 7.5)]"/>
                <filter string="Downtime losses" name="has_dt" domain="[('current_downtime_losses', '&gt;', 7.5)]"/>
            </xpath>
        </field>
    </record>
</odoo>